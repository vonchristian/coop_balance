<div class="row">
  <div class="col-md-6 offset-md-3">
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">New Loan Product Details </h3>
      </div>
      <div class="card-body">
        <%= simple_form_for @loan_product, url: :management_module_settings_loan_products, html: { autocomplete: "off" } do |f| %>
          <%= f.error_notification %>
          <%= f.input :cooperative_id, input_html: { value: current_user.cooperative.id }, as: :hidden %>
          <%= f.input :name %>
          <%= f.input :description, as: :text %>
          <%= f.input :maximum_loanable_amount,  as: :currency, input_html: { style: "width:100%" } %>

          <%= f.input :loans_receivable_current_account_id, label: "Select Loans Receivable (Current) Account", collection: AccountingModule::Asset.all.map{|a| [a.name.titleize, a.id] }, input_html: { id: 'loanAccountSelect'} %>
          <%= f.input :loans_receivable_past_due_account_id, label: "Select Loans Receivable (Past Due) Account", collection: AccountingModule::Asset.all.map{|a| [a.name.titleize, a.id] } %>
          <h4>Interest Configuration</h4>
          <%= f.input :interest_rate %>
          <%= f.input :unearned_interest_income_account_id,  collection: AccountingModule::Asset.all.map{|a| [a.name, a.id] } %>
          <%= f.input :interest_revenue_account_id,  collection: AccountingModule::Revenue.all.map{|a| [a.name, a.id] } %>
          <h4>Penalty Configuration</h4>
          <%= f.input :penalty_rate %>
          <%= f.input :penalty_revenue_account_id,  collection: AccountingModule::Revenue.all.map{|a| [a.name, a.id] } %>
          <hr>
          <%= link_to "Cancel", management_module_settings_cooperative_products_path, class: 'btn btn-default' %>
          <%= f.submit "Create Loan Product", class: "btn btn-danger float-right", data: { disable_with: "Processing..." } %>
        <% end %>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
  $(document).ready(function() {
    $("#loanAccountSelect").select2({
      theme: "bootstrap"
    });
    $("#loans_module_loan_product_registration_loans_receivable_past_due_account_id").select2({
      theme: "bootstrap"
    });
    $("#loans_module_loan_product_registration_unearned_interest_income_account_id").select2({
      theme: "bootstrap"
    });
    $("#loans_module_loan_product_registration_interest_revenue_account_id").select2({
      theme: "bootstrap"
    });
    $("#loans_module_loan_product_registration_interest_receivable_account_id").select2({
      theme: "bootstrap"
    });
    $("#loans_module_loan_product_registration_penalty_receivable_account_id").select2({
      theme: "bootstrap"
    });
    $("#loans_module_loan_product_registration_penalty_revenue_account_id").select2({
      theme: "bootstrap"
    });
    $("#loans_module_loan_product_registration_penalty_discount_account_id").select2({
      theme: "bootstrap"
    });
  });
  $(document).ready(function() {
    $("#loanInterestAccountSelect").select2({
      theme: "bootstrap"
    });
  });
  $(document).ready(function() {
    $("#loanPenaltyAccountSelect").select2({
      theme: "bootstrap"
    });
  });
</script>
