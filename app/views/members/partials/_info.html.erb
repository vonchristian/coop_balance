<div class="card">
  <div class="card-body">
    <h4 class="card-title"> Information </h4>
    <br>
    <table class="table">
      <tbody>
        <tr>
          <td style="width:200px"><strong><i class="fa fa-map-marker"></i> Current Address</strong></td>
          <td><%= @member.current_address_complete_address %></td>
          <td>
            <%= link_to 'Update', new_member_address_path(@member), class: "btn btn-outline-warning btn-sm" %>
          </td>
        </tr>
        <tr>
          <td style="width:200px"><strong><i class="fa fa-phone"></i> Account Number </strong></td>
          <td><%= @member.account_number || "N/A" %></td>
          <td></td>
        </tr>
        <tr>
          <td style="width:200px"><strong><i class="fa fa-phone"></i> Contact Info </strong></td>
          <td><%= @member.current_contact_number || "N/A" %></td>
          <td><%= link_to 'Update', new_member_contact_path(@member), class: "btn btn-outline-warning btn-sm" %></td>
        </tr>
        <tr>
          <td style="width:200px"><strong><i class="fa fa-calendar"></i> Date of Birth </strong></td>
          <td><%= @member.date_of_birth.try(:strftime, "%B %e, %Y") || "N/A" %></td>
          <td><%= link_to 'Update', edit_member_path(@member), class: "btn btn-outline-warning btn-sm" %></td>
        </tr>
        <tr>
          <td style="width:200px"><strong><i class="fa fa-calendar"></i> Age </strong></td>
          <td><%= @member.date_of_birth.present? ? @member.age.to_s + "Years Old" : "N/A" %></td>
          <td></td>
        </tr>
        <tr>
          <td style="width:200px"><strong><i class="fa fa-calendar"></i> Sex </strong></td>
          <td><%= @member.sex.try(:titleize) %><br></td>
          <td></td>
        </tr>
        <tr>
          <td style="width:200px"><strong><i class="fa fa-calendar"></i> Civil Status </strong></td>
          <td><%= @member.civil_status.try(:titleize) || "N/A" %></td>
          <td></td>
        </tr>
        <tr>
          <td style="width:200px"><strong><i class="fa fa-info"></i> TIN Number </strong></td>
          <td><%= @member.current_tin_number || "N/A"%></td>
          <td><%= link_to 'Update', new_member_tin_path(@member), class: "btn btn-outline-warning btn-sm" %></td>
        </tr>
        <tr>
          <td style="width:200px"><strong><i class="fa fa-info"></i> Office </strong></td>
          <td><%= @member.office_name || "N/A" %></td>
          <td></td>
        </tr>
        <tr>
          <td style="width:200px"><strong><i class="fa fa-info"></i> Organizations </strong></td>
          <td>
            <% @member.organizations.each do |organization| %>
              <p><%= organization.name || "N/A" %></p>
            <% end %>
          </td>
          <td></td>
        </tr>
        <tr>
          <td style="width:200px"><strong><i class="fa fa-calendar"></i> Membership Date </strong></td>
          <% @member.memberships.for_cooperative(current_user.cooperative).each do |membership| %>
            <td><%= membership.membership_date.try(:strftime, ("%B %e, %Y")) %></td>
            <td></td>
          <% end %>
        </tr>
        <tr>
          <td style="width:200px"><strong><i class="fa fa-info"></i> Beneficiaries </strong></td>
          <td>
            <% @member.beneficiaries.each do |beneficiary| %>
              <div class="row">
                <div class="col-md-6">
                  <p><%= beneficiary.full_name %></p>
                </div>
                <div class="col-md-6">
                  <p><%= beneficiary.relationship.try(:titleize) %></p>
                </div>
              </div>
            <% end %>
          </td>
          <td><%= link_to new_member_beneficiary_path(@member) do %>
                <span class="btn btn-outline-warning btn-sm" data-toggle="tooltip" title="Add Beneficiary"><i class="fa fa-plus-circle"></i> Add
                </span>
              <% end %>
          </td>

        </tr>
      </tbody>
    </table>
  </div>
  <hr>
  <div class="card-body">
    <div class="row">
      <div class="col-md-6">
        <h3 class="card-title"> Signature Specimen </h3>
      </div>
      <div class="col-md-6">
        <%= simple_form_for Member.new, url: member_signature_specimens_path(@member) do |f| %>
          <%= f.input :signature_specimen, as: :file, label: false, input_html: { class: 'choose-btn center-block' } %>
          <a class="btn btn-xm btn-outline-warning float-right" id="browse">Update Signature Specimen</a>
          
        <% end %>
      </div>
    </div>
    <br>
    <% if @member.signature_specimen.attachment.present? %>
      <%= image_tag(@member.signature_specimen, height: 300, width: 500) %>
    <% end %>
    <hr>
    <%= link_to 'Print Member Info', member_info_index_path(@member, format: 'pdf'), class: 'btn btn-success float-right' %>
  </div>
</div>
<script type="text/javascript">
  $('#browse').click(function(e) {
    $('#member_signature_specimen').click();
    e.preventDefault();
    e.stopPropagation();
    $('#member_signature_specimen').change(function() {
      var val = $('#member_signature_specimen').val();
      if (val != ''){
        $('#new_member').submit();
      }
    });
  });
</script>