<div class="container">
  <div class="card">
    <div class="card-header">
    <div class="row">
      <div class="col-md-4">
        <h3 class="title-up">Income Statement - <%= @office.name %> </h3>
        Date Covered: <%= @from_date.strftime("%B %e, %Y") %> -
        <%= @to_date.strftime("%B %e, %Y") %>
        <br>
        <% current_cooperative.offices.each do |office| %>

        <%= link_to office.name, accounting_module_reports_income_statements_path(office_id: office.id), class: "btn btn-outline-primary btn-sm" %>
        <% end %>
        <%#= link_to "All Offices", accounting_module_reports_income_statements_path, class: "btn btn-outline-primary btn-sm" %>

      </div>
      <div class="col-md-6">
        <%= form_tag({:action => 'index'}, {:method => :get, class: "form-inline"}) do %>

          <%= text_field_tag :from_date, @from_date.strftime("%B %e, %Y"), :class => 'datepicker form-control', :placeholder => "To" %>
          <%= text_field_tag :to_date,   @to_date.strftime("%B %e, %Y"), :class => 'datepicker form-control', :placeholder => "To" %>

          <%= hidden_field_tag :office_id, @office.id %>
          <button type="submit" class="btn btn-primary">Generate</button>
        <% end %>
      </div>
      <div class="col-md-2">
        Export To:
        <%= link_to 'Excel', accounting_module_reports_income_statements_path(office_id: @office.id, format: 'xlsx', from_date: @from_date, to_date: @to_date ), class: 'btn btn-outline-primary btn-sm' %>
        <%= link_to 'PDF', accounting_module_reports_income_statements_path(office_id: @office.id, format: 'pdf', from_date: @from_date, to_date: @to_date ), class: 'btn btn-outline-primary btn-sm' %>


      </div>
    </div>
  </div>
    <div class="card-body">
      <div class="row">
        <div class="col-md-7">

        </div>
        <div class="col-md-5">
          <%= @from_date.strftime('%B %e, %Y') %>-
          <%= @to_date.strftime('%B %e, %Y') %>
        </div>
      </div>

      <b>REVENUE </b><br>
      <% current_cooperative.accounts.revenues.each do |account| %>
      <div class="row">
        <div class="col-md-7">
          <%= account.name %>
        </div>
        <div class="col-md-5">
          <%= number_to_currency account.balance(from_date: @from_date, to_date: @to_date) %>
        </div>
      </div>
      <% end %>
      <hr>
      <div class="row">
        <div class="col-md-7">
          <b>Total Revenues</b>
        </div>
        <div class="col-md-5">
          <b><%= number_to_currency current_cooperative.accounts.revenues.balance(from_date: @from_date, to_date: @to_date) %></b>
        </div>
      </div>
      <hr>
      <b>EXPENSES </b><br>
      <% current_cooperative.accounts.expenses.each do |account| %>
      <div class="row">
        <div class="col-md-7">
          <%= account.name %>
        </div>
        <div class="col-md-5">
          <%= number_to_currency account.balance(from_date: @from_date, to_date: @to_date) %>
        </div>
      </div>
      <% end %>
      <hr>
      <div class="row">
        <div class="col-md-7">
          <b>Total Expenses</b>
        </div>
        <div class="col-md-5">
          <b><%= number_to_currency current_cooperative.accounts.expenses.balance(from_date: @from_date, to_date: @to_date) %></b>
        </div>
      </div>
      <hr>
      <div class="row">
        <div class="col-md-7">
          <b>Net Surplus/ Loss </b>
        </div>
        <div class="col-md-5">
          <% net = (current_cooperative.accounts.revenues.balance(from_date: @from_date, to_date: @to_date) - current_cooperative.accounts.expenses.balance(from_date: @from_date, to_date: @to_date)) %>
          <b><%= number_to_currency net %></b>
        </div>
      </div>
