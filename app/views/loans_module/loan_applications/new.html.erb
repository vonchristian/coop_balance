<div class="row">
  <div class="col-md-6 col-md-offset-3">
    <div class="box box-solid">
      <div class="box-header bg-gray">
        <center>
          <%= image_tag(@borrower.avatar.url(:medium), class: "img-circle", height: 60, width: 60) %><br>
          <h3 class="box-title"> <%= @borrower.name %> </h3>
        </center>
      </div>
      <div class="box-body">
<%= simple_form_for @loan, url: :loans_module_loan_applications do |f| %>
  <%= f.error_notification %>
    <%= f.input :loan_product_id, validate: { presence: true }, label: 'Select Type of Loan', collection: LoansModule::LoanProduct.all.map{|a| [a.name.titleize, a.id] }, input_html: { id: 'loanProductSelect' } %>

  <%= f.input :borrower_id, input_html: { value: @borrower.id }, as: :hidden %>
  <%= f.input :borrower_type, input_html: { value: @borrower.class.to_s }, as: :hidden %>
  <%= f.input :loan_amount, as: :currency %>
  <%= f.input :term, label: "Loan Term (in months)" %>
  <%= f.input :mode_of_payment, collection: LoansModule::Loan.mode_of_payments.keys.to_a.map{ |a| [a.titleize, a] }, as: :radio_buttons %>
  <%= f.input :application_date, as: :string, input_html: { class: "datepicker", value: Time.zone.now.strftime("%B %e, %Y") } %>
  <%= f.input :preparer_id, input_html: { value: current_user.id }, as: :hidden %>
  <%= f.input :account_number, input_html: { value: SecureRandom.uuid }, as: :hidden %>
  <div class="box-footer">
    <%= button_tag( :class => "btn btn-primary pull-right") do %>
      Proceed  &nbsp;<i class="icon-arrow-right-circle"></i>
    <% end %>
  </div>
<% end %>

<script type="text/javascript">
  $(document).ready(function() {
    $("#loanProductSelect").select2({
      theme: "bootstrap"
    });
  });
  $(document).ready(function() {
    $("#borrowerSelect").select2({
      theme: "bootstrap"
    });
  });
</script>
