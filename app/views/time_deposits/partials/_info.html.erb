<div class="card-body">
  <div class="row">
    <div class="col-md-6">
      <div class="row justify-content-end">
        <div class="col-md-11">
          <div class="row">
            <div class="col-md-5">
              <label>Time Deposit Product</label>
            </div>
            <div class="col-md-6">
              <%= @time_deposit.time_deposit_product_name.try(:upcase) %>
            </div>
          </div>
          <hr class="min-margin">
          <div class="row">
            <div class="col-md-5">
              <label>Depositor</label>
            </div>
            <div class="col-md-6">
              <%= @time_deposit.depositor_name %>
            </div>
          </div>
          <hr class="min-margin">
          <div class="row">
            <div class="col-md-5">
              <label>Account Number</label>
            </div>
            <div class="col-md-6">
              <%= @time_deposit.account_number %>
            </div>
          </div>
          <hr class="min-margin">
          <div class="row">
            <div class="col-md-5">
              <label>Date Deposited</label>
            </div>
            <div class="col-md-6">
              <%= @time_deposit.effectivity_date.strftime("%B %e, %Y") %>
            </div>
          </div>
          <hr class="min-margin">
          <div class="row">
            <div class="col-md-11">
              <%= link_to time_deposit_path(@time_deposit, format: "pdf") do %>
                <span class="btn btn-default"><i class="fa fa-certificate"></i> Time Deposit Certificate </span>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <hr class="min-margin set-visibility">
      <div class="row justify-content-end">
        <div class="col-md-7 col-sm-6 col-auto">
          <small>AMOUNT DEPOSITED</small>
          <h3 class="card-title"><%= number_to_currency @time_deposit.balance %></h3>
          <% if policy([:time_deposits, :withdrawal]).new? %>
            <%= link_to 'Withdraw', new_time_deposit_withdrawal_path(@time_deposit), class: "btn btn-danger" %>
          <% end %>
        </div>
        <div class="col-md-4 col-sm-6 col-auto">
          <small>MATURITY DATE</small>
          <p><i class="fa fa-calendar"></i>
            <%= @time_deposit.maturity_date.strftime("%B %e, %Y")  %>
          </p>
          <h3 class="card-title">
            <%= @time_deposit.remaining_term %>
          </h3>
          <small>DAYS TO MATURE</small>
        </div>
      </div>
    </div>
  </div>
</div>
<hr class="no-margin">
<div class="card-body">
  <p class="text-muted">TRANSACTIONS HISTORY </p>
  <div class="table table-responsive">
    <table class="table table-hover table-striped">
      <thead>
        <tr>
          <th> Date </th>
          <th>Reference Number</th>
          <th> Amount </th>
          <th> Type </th>
          <th> Employee </th>
        </tr>
      </thead>
      <tbody>
        <% @time_deposit.entries.each do |entry| %>
          <tr>
            <td><%= entry.entry_date.strftime("%B %e, %Y") %></td>
            <td><%= entry.reference_number %></td>
            <td><%= number_to_currency entry.credit_amounts.sum(:amount) %></td>

            <td><%= entry.description %> / <%= entry.payment_type %></td>
            <td><% if entry.recorder %>
              <%=image_tag(entry.recorder.avatar, class: "img-circle", height: 35, width: 35) if entry.recorder.avatar.attached? %> &nbsp;
              <%= entry.recorder_first_and_last_name %>
              <% end %>
             </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
